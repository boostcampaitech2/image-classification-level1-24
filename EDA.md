# EDA 초안 by 용처리

## Overview 읽기

> 우리나라는 COVID-19 확산 방지를 위해 사회적 거리 두기를 단계적으로 시행하는 등의 많은 노력을 하고 있습니다.

- 학습시킨 모델의 주요 사용처가 한국임을 짐작할 수 있다.

> 감염 확산 방지를 위해 무엇보다 중요한 것은 모든 사람이 마스크로 코와 입을 가려서 혹시 모를 감염자로부터의 전파 경로를 원천 차단하는 것입니다.

> 반드시 마스크를 착용해야 할 필요가 있으며, 무엇 보다도 코와 입을 완전히 가릴 수 있도록 올바르게 착용하는 것이 중요합니다.

- '반드시 마스크를 착용해야 할 필요가 있으며' 부분에서 마스크인지 아닌지에 대한 변별력을 가진 모델로 학습시키는 것이 중요함을 짐작할 수 있다.

- 마스크가 코와 입을 가렸는지 여부 또한 매우 중요한 부분임을 알 수 있다.

> 이미지 만으로 이 사람이 마스크를 쓰고 있는지, 쓰지 않았는지, 정확히 쓴 것이 맞는지 자동으로 가려낼 수 있는 시스템이 필요합니다.

- COVID-19 확산 방지를 위해 사용될 모델이기 때문에 방역수칙에서 권장되는 kf시리즈 또는 비말 차단 마스크 등을 제대로 착용했는지 알아내는 능력이 모델의 주요 성능지표가 될 것으로 예상된다.



## 데이터 개요 읽기

> 학습 데이터 개요
>
> 마스크를 착용하는 건 COIVD-19의 확산을 방지하는데 중요한 역할을 합니다. 제공되는 이 데이터셋은 사람이 마스크를 착용하였는지 판별하는 모델을 학습할 수 있게 해줍니다. 모든 데이터셋은 아시아인 남녀로 구성되어 있고 나이는 20대부터 70대까지 다양하게 분포하고 있습니다. 간략한 통계는 다음과 같습니다.
>
> - 전체 사람 명 수 : 4,500
> - 한 사람당 사진의 개수: 7 [마스크 착용 5장, 이상하게 착용(코스크, 턱스크) 1장, 미착용 1장]
> - 이미지 크기: (384, 512)
>
> 전체 데이터셋 중에서 60%는 학습 데이터셋으로 활용됩니다.

- 4500명의 데이터 중 학습에 활용가능한 데이터는 60%인 2700명 분량이 되겠다.
- 코스크와 턱스크는 구분하지 않는다.
- 이미지 크기는 통일되어있다.



> 평가 데이터 개요
>
> 학습 데이터와 평가 데이터전체를 구분하기 위해 임의로 섞어서 분할하였습니다. 학습 데이터셋이 아닌 나머지 40%의 데이터셋 중에서 20%는 public 테스트셋, 그리고 20%는 private 테스트셋으로 사용됩니다.
>
> - 진행중인 대회의 리더보드 점수는 public 테스트셋으로 계산이 됩니다.
> - 최종 순위는 private 테스트셋을 통해 산출한 점수로 확정됩니다. private 테스트셋의 점수는 대회가 진행되는 동안 볼 수 없습니다

- 대회 진행중에 평가되는 점수는 학습데이터와 별개의 데이터 셋으로 채점되며 900명 분량이다.
- 최종 평가는 진행중 평가와는 또 다른 데이터 셋으로 채점되며 이 또한 900명 분량이다.





## 전체적인 데이터 살펴보기

제공받은 데이터는 train.tar.gz 의 형태였고, 압축을 풀면 tain 과 eval 폴더로 구분된다.

train 폴더 안에는 train.csv 파일과 images 폴더가 들어있으며, images 폴더 안에는 각각의 사람이 찍힌 7장의 이미지가 들어있다.

### csv 파일 분석

train.csv 파일은 id, gender, race, age, path의 column을 가지고 있다.

주목할만한 점은 아래와 같다.
 - path 항은 각각의 사람이 찍은 사진들을 모아놓은 폴더의 경로정보이다.
 - gender를 구분한다. 통계를 내기 위한 목적으로 예상된다.
 - race 또한 구분하지만 이에 해당하는 부분은 모두 Asian 뿐이다. 마찬가지로 통계목적으로 보이나 의미는 크게 없을 것 같다.
 - age를 구분한다.
 - id는 index와 일치하지 않으며 competition에 사용되는 모든 이미지의 분류(사람 수) 4500보다도 더 높다.
 - id는 대부분의 경우 1,2,....12,13,14,...,1023,1024,... 와 같은 형태이나 001024-1와 같은 형태도 드문드문 존재한다.

## pandas

1. 결측치 존재 유무 확인
   - 존재하지 않음
2. 그래프를 통한 분석
   - 성별, 나이별 분포, 라벨별로 복합적인 분석 수행 필요.

## train set 분석

1. 이상치(Outlier) 분석
   - gender labeling 오류 존재. (남여 혼동)
   - age labeling 오류 존재 가능성 농후함. (그러나 실질적으로 확인하기 힘들며 개선도 불가능함)
   - [권혜빈 캠퍼님 제보] 마스크 라벨 문제 존재 (마스크 대신 스카프 착용)

2. 심층분석

   > mask1은 kf부류의 새부리형 마스크
   >
   > mask2는 파란 비말차단 마스크
   >
   > mask3은 일반 비말차단 마스크
   >
   > mask4는 분홍 비말차단 마스크
   >
   > mask5는 그외 모양
   
   - 기타 마스크가 mask 5에 몰려있음 (스카프 이외에 메이커 로고 박힌 비말차단 마스크, 기타 질병관리청에서 권장한 종류에 미포함되는 마스크등 기타 다양한 마스크가 전부 mask 5에 존재)

## test set 분석

### columns 항목 ('age', 'gender', 'race') 분석

대략적인 확인을 통해 알아낸 것은 아래와 같다.

- gender와 age 는 test set 또한 다양하게 분포함.
- race의 경우 백인 또는 흑인의 사진은 발견되지 않음 동양인만 존재한다고 사료됨.

### test set 주목할 점

- 'mask 1' ~ 'mask 4' 에 해당하는 마스크에 약간의 글씨나 캐릭터, 낙서 등이 있는 case 존재.
- 스카프를 마스크 대신 착용한 case 다수 존재.
- 비말차단 마스크에 메이커 로고가 박힌 마스크 상당수 존재



## 생각해볼점

- mask 5의 mask 인정 여부.
- 만약 질병관리청의 권장 기준에 입각해 mask 5 중 스카프 등의 데이터를 인정하지 않는다면 이를 학습시킬 방법은 무엇인지.
  - cutmix를 사용하여 스카프를 얼굴에 합성한 데이터를 만들어 마스크가 아닌 case로 훈련시키는 방법은 효과가 있을지.